{% extends "base.html" %}
{% block title %}Shortify - Fast & Smart URL Shortener{% endblock %}
{% block content %}
<!-- HERO SECTION -->
<section class="bg-gradient-to-b from-blue-50 to-white py-20 text-center relative overflow-hidden">
  <div class="container mx-auto px-6">
    <h1 class="text-5xl md:text-6xl font-extrabold text-gray-900 mb-6 leading-tight animate-fade-in">
      Shorten. Share. <span class="text-blue-600">Track.</span>
    </h1>
    <p class="text-lg text-gray-600 max-w-2xl mx-auto mb-10">
      Transform long, messy URLs into clean, shareable links ‚Äî powered by FastAPI & Redis.
    </p>

    <!-- URL SHORTENER FORM -->
    <form id="shorten-form" action="/shorten" method="POST"
      class="bg-white shadow-xl rounded-2xl p-6 md:flex md:items-center md:max-w-3xl mx-auto gap-2 transition hover:shadow-2xl flex-wrap justify-center"
      onsubmit="showLoader()">
      <input id="url-input" name="original_url" type="url" placeholder="Paste your long URL here..." required
        class="flex-grow w-full md:w-auto p-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500" />

      <input id="alias" name="alias" type="text" placeholder="Custom alias (optional)"
        class="w-full md:w-40 p-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500" />

      <select id="ttl" name="ttl"
        class="w-full md:w-40 p-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500">
        <option value="86400">1 Day</option>
        <option value="604800">1 Week</option>
        <option value="2592000">1 Month</option>
        <option value="0" selected>Forever</option>
      </select>

      <button type="submit" id="shorten-btn"
        class="min-w-[150px] w-full md:w-auto bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl font-semibold hover:opacity-90 transition flex justify-center items-center gap-2">
        <span id="btn-text">Shorten URL</span>
        <svg id="btn-loader" class="animate-spin h-5 w-5 text-white hidden" xmlns="http://www.w3.org/2000/svg"
          fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
        </svg>
      </button>
    </form>

    <!-- RESULT SECTION -->
    {% if short_url %}
    <div id="short-result" class="mt-6 opacity-100 transition-opacity duration-700">
      <p class="text-gray-700 text-sm mb-2">Your shortened link:</p>
      <span class="block text-gray-600 mb-2">This link will be valid for {{ readable_ttl }}.</span>

      <div class="flex items-center justify-center gap-2 bg-gray-100 px-4 py-2 rounded-lg max-w-md mx-auto">
        <a id="short-link" href="{{ short_url }}" class="text-blue-600 font-medium underline" target="_blank">
          {{ short_url }}
        </a>
        <button type="button" onclick="copyLink()"
          class="text-sm text-gray-600 hover:text-blue-600 flex items-center gap-1">
          üìã <span id="copy-text">Copy</span>
        </button>
      </div>
    </div>
    {% elif error %}
    <div id="result" class="mt-4 text-red-700 bg-red-100 border border-red-300 rounded-lg px-4 py-3 max-w-md mx-auto"
      role="alert">
      <strong class="block mb-1">‚ö†Ô∏è Error:</strong> {{ error }}
    </div>
    {% endif %}
  </div>

  <!-- Decorative blobs -->
  <div class="absolute top-0 left-0 w-72 h-72 bg-blue-200 rounded-full blur-3xl opacity-30 -z-10"></div>
  <div class="absolute bottom-0 right-0 w-72 h-72 bg-purple-200 rounded-full blur-3xl opacity-30 -z-10"></div>
</section>

<!-- FEATURES SECTION -->
<section class="py-20 bg-gray-50 text-center">
  <div class="container mx-auto px-6">
    <h2 class="text-3xl md:text-4xl font-bold mb-8 text-gray-900">
      Why Choose Shortly?
    </h2>

    <div class="grid md:grid-cols-3 gap-10 max-w-6xl mx-auto">
      <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition">
        <div class="text-blue-600 text-4xl mb-3">‚ö°</div>
        <h4 class="font-semibold text-lg mb-2">Blazing Fast</h4>
        <p class="text-gray-600">
          Powered by FastAPI & Redis for instant URL shortening.
        </p>
      </div>

      <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition">
        <div class="text-purple-600 text-4xl mb-3">üìä</div>
        <h4 class="font-semibold text-lg mb-2">Track Analytics</h4>
        <p class="text-gray-600">
          Get real-time insights into your link clicks and usage patterns.
        </p>
      </div>

      <div class="p-6 bg-white rounded-2xl shadow hover:shadow-lg transition">
        <div class="text-indigo-600 text-4xl mb-3">üîó</div>
        <h4 class="font-semibold text-lg mb-2">Custom Short Links</h4>
        <p class="text-gray-600">
          Brand your links with custom aliases and domain options.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- CTA SECTION -->
<section class="py-20 bg-gradient-to-r from-blue-600 to-purple-600 text-white text-center">
  <div class="container mx-auto px-6">
    <h2 class="text-4xl font-bold mb-4">Start Shortening Smarter Today</h2>
    <p class="text-lg text-blue-100 mb-8">
      Join thousands of users simplifying their links with Shortly.
    </p>
    <a href="/signup" class="bg-white text-blue-700 font-semibold px-8 py-3 rounded-xl hover:bg-gray-100 transition">
      Get Started for Free
    </a>
  </div>
</section>

<!-- JS -->
<script>
  function showLoader() {
    const btn = document.getElementById("shorten-btn");
    const btnText = document.getElementById("btn-text");
    const btnLoader = document.getElementById("btn-loader");

    btn.disabled = true;
    btnText.textContent = "Shortening...";
    btnLoader.classList.remove("hidden");
  }

  function copyLink() {
    const shortLink = document.getElementById("short-link").textContent;
    const copyText = document.getElementById("copy-text");
    navigator.clipboard.writeText(shortLink);
    copyText.textContent = "Copied!";
    setTimeout(() => (copyText.textContent = "Copy"), 1500);
  }
</script>
{% endblock %}